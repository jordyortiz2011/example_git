{"openapi":"3.1.0","info":{"title":"Interbank API ","summary":"Endpoints para la interconexión del servicio recaudo para Caja Maynas mediante interbank","version":"0.1.1"},"paths":{"/user/get_token":{"post":{"tags":["User"],"summary":"Sign User In","operationId":"sign_user_in_user_get_token_post","requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_sign_user_in_user_get_token_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenResponse"}}}},"400":{"description":"Bad Request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Response400"}}}},"422":{"description":"Unprocessable Entity","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Response422"}}}}}}},"/recaudo/consulta":{"post":{"tags":["Recaudo"],"summary":"Recaudo Consulta","operationId":"recaudo_consulta_recaudo_consulta_post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"id-transaction","in":"header","required":true,"schema":{"type":"integer","description":"Número de operación creado por IBK, este número es vital para identificar la transacción. (RETRIEVAL REFERENCE NUMBER)","title":"Id-Transaction"},"description":"Número de operación creado por IBK, este número es vital para identificar la transacción. (RETRIEVAL REFERENCE NUMBER)","example":[103]},{"name":"datetime-local-transaction","in":"header","required":true,"schema":{"type":"string","description":"Fecha/Hora de transacción (YYYY-MM-DD HH:mm:ss.uuu)","examples":["2024-06-27 15:45:57.542"],"title":"Datetime-Local-Transaction"},"description":"Fecha/Hora de transacción (YYYY-MM-DD HH:mm:ss.uuu)"},{"name":"pos-condition-code","in":"header","required":true,"schema":{"type":"integer","description":"Código de canal de la operación. Ejm: 10:Ventanilla, 20:ATM, 40:Agente, 60:Web","examples":[10],"title":"Pos-Condition-Code"},"description":"Código de canal de la operación. Ejm: 10:Ventanilla, 20:ATM, 40:Agente, 60:Web"},{"name":"pos-condition-id","in":"header","required":true,"schema":{"type":"integer","description":"Número de operación del canal IBK. (TRACE)","examples":[73],"title":"Pos-Condition-Id"},"description":"Número de operación del canal IBK. (TRACE)"},{"name":"card-acceptor-id","in":"header","required":true,"schema":{"type":"string","description":"Valor que identifica al Terminal IBK donde se origina la operación","examples":["PIB0"],"title":"Card-Acceptor-Id"},"description":"Valor que identifica al Terminal IBK donde se origina la operación"},{"name":"card-acceptor-code","in":"header","required":true,"schema":{"type":"string","description":"Código identificador de la oficina IBK","examples":["898"],"title":"Card-Acceptor-Code"},"description":"Código identificador de la oficina IBK"},{"name":"card-acceptor-name","in":"header","required":true,"schema":{"type":"string","description":"Descripción de la oficina de IBK","examples":["SERV CLI X INTERNET"],"title":"Card-Acceptor-Name"},"description":"Descripción de la oficina de IBK"},{"name":"transaction-currency-code","in":"header","required":true,"schema":{"type":"integer","description":"Identifica la moneda del servicio. 1=Soles, 2=Dólares","examples":[1],"title":"Transaction-Currency-Code"},"description":"Identifica la moneda del servicio. 1=Soles, 2=Dólares"}],"requestBody":{"content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/ConsultaRequestBody"}],"title":"Request Body"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ConsultaResponse200"}}},"headers":{"id_transaction":{"schema":{"type":"int","example":105},"description":"Mismo que en el REQUEST"},"pos-condition-code":{"schema":{"type":"int","example":10},"description":"Mismo que en el REQUEST"},"amount-transaction":{"schema":{"type":"Decimal","example":200.56},"description":"Cantidad total de la cuota"},"approval-code":{"schema":{"type":"int","example":77},"description":"Código de Aprobación de la consulta"}}},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Response400"}}},"description":"Bad Request"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Response422"}}},"description":"Unprocessable Entity"}}}},"/recaudo/pago":{"post":{"tags":["Recaudo"],"summary":"Recaudo Pago","operationId":"recaudo_pago_recaudo_pago_post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"id-transaction","in":"header","required":true,"schema":{"type":"integer","description":"Número de operación creado por IBK, este número es vital para identificar la transacción. (RETRIEVAL REFERENCE NUMBER)","title":"Id-Transaction"},"description":"Número de operación creado por IBK, este número es vital para identificar la transacción. (RETRIEVAL REFERENCE NUMBER)","example":[103]},{"name":"datetime-local-transaction","in":"header","required":true,"schema":{"type":"string","description":"Fecha/Hora de transacción (YYYY-MM-DD HH:mm:ss.uuu)","examples":["2024-06-27 15:45:57.542"],"title":"Datetime-Local-Transaction"},"description":"Fecha/Hora de transacción (YYYY-MM-DD HH:mm:ss.uuu)"},{"name":"pos-condition-code","in":"header","required":true,"schema":{"type":"integer","description":"Código de canal de la operación. Ejm: 10:Ventanilla, 20:ATM, 40:Agente, 60:Web","examples":[10],"title":"Pos-Condition-Code"},"description":"Código de canal de la operación. Ejm: 10:Ventanilla, 20:ATM, 40:Agente, 60:Web"},{"name":"pos-condition-id","in":"header","required":true,"schema":{"type":"integer","description":"Número de operación del canal IBK. (TRACE)","examples":[73],"title":"Pos-Condition-Id"},"description":"Número de operación del canal IBK. (TRACE)"},{"name":"card-acceptor-id","in":"header","required":true,"schema":{"type":"string","description":"Valor que identifica al Terminal IBK donde se origina la operación","examples":["PIB0"],"title":"Card-Acceptor-Id"},"description":"Valor que identifica al Terminal IBK donde se origina la operación"},{"name":"card-acceptor-code","in":"header","required":true,"schema":{"type":"string","description":"Código identificador de la oficina IBK","examples":["898"],"title":"Card-Acceptor-Code"},"description":"Código identificador de la oficina IBK"},{"name":"card-acceptor-name","in":"header","required":true,"schema":{"type":"string","description":"Descripción de la oficina de IBK","examples":["SERV CLI X INTERNET"],"title":"Card-Acceptor-Name"},"description":"Descripción de la oficina de IBK"},{"name":"transaction-currency-code","in":"header","required":true,"schema":{"type":"integer","description":"Identifica la moneda del servicio. 1=Soles, 2=Dólares","examples":[1],"title":"Transaction-Currency-Code"},"description":"Identifica la moneda del servicio. 1=Soles, 2=Dólares"}],"requestBody":{"content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/PagoRequestBody"}],"title":"Request Body"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PagoResponse200"}}},"headers":{"id_transaction":{"schema":{"type":"int","example":105},"description":"Mismo que en el REQUEST"}}},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Response400"}}},"description":"Bad Request"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Response422"}}},"description":"Unprocessable Entity"}}}},"/recaudo/pago_extorno_autom":{"post":{"tags":["Recaudo"],"summary":"Recaudo Pago Extorno Autom","operationId":"recaudo_pago_extorno_autom_recaudo_pago_extorno_autom_post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"id-transaction","in":"header","required":true,"schema":{"type":"integer","description":"Id de Transacción, debe ser igual al que fue enviado para hacer el pago, para poder hacer el extorno automa.","title":"Id-Transaction"},"description":"Id de Transacción, debe ser igual al que fue enviado para hacer el pago, para poder hacer el extorno automa.","example":[103]}],"requestBody":{"content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/PagoExtornoAutomRequestBody"}],"title":"Request Body"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Response400"}}},"description":"Bad Request"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Response422"}}},"description":"Unprocessable Entity"}}}},"/recaudo/anulacion":{"post":{"tags":["Recaudo"],"summary":"Recaudo Anulacion","operationId":"recaudo_anulacion_recaudo_anulacion_post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"id-transaction","in":"header","required":true,"schema":{"type":"integer","description":"Número de operación creado por IBK, este número es vital para identificar la transacción. (RETRIEVAL REFERENCE NUMBER)","title":"Id-Transaction"},"description":"Número de operación creado por IBK, este número es vital para identificar la transacción. (RETRIEVAL REFERENCE NUMBER)","example":[103]},{"name":"datetime-local-transaction","in":"header","required":true,"schema":{"type":"string","description":"Fecha/Hora de transacción (YYYY-MM-DD HH:mm:ss.uuu)","examples":["2024-06-27 15:45:57.542"],"title":"Datetime-Local-Transaction"},"description":"Fecha/Hora de transacción (YYYY-MM-DD HH:mm:ss.uuu)"}],"requestBody":{"content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/AnulacionRequestBody"}],"title":"Request Body"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AnulacionResponse200"}}}},"400":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Response400"}}},"description":"Bad Request"},"422":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Response422"}}},"description":"Unprocessable Entity"}}}},"/recaudo/anulacion_extorno_autom":{"post":{"tags":["Recaudo"],"summary":"Recaudo Anulacion Extorno Autom","operationId":"recaudo_anulacion_extorno_autom_recaudo_anulacion_extorno_autom_post","requestBody":{"content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/AnulacionExtornoAutomRequestBody"}],"title":"Request Body"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"400":{"description":"Bad Request","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Response400"}}}},"422":{"description":"Unprocessable Entity","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Response422"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}}},"components":{"schemas":{"AnulacionExtornoAutomRequestBody":{"properties":{"pago_id":{"type":"integer","exclusiveMaximum":99999999.0,"minimum":1.0,"title":"Pago Id","description":"Identificador unico para cada pago","examples":[107]}},"type":"object","required":["pago_id"],"title":"AnulacionExtornoAutomRequestBody"},"AnulacionRequestBody":{"properties":{"pago_id":{"type":"integer","exclusiveMaximum":99999999.0,"minimum":1.0,"title":"Pago Id","description":"Identificador unico para cada pago","examples":[107]}},"type":"object","required":["pago_id"],"title":"AnulacionRequestBody"},"AnulacionResponse200":{"properties":{"status":{"type":"string","maxLength":18,"minLength":18,"title":"Status","description":"Mensaje del estado de la petición","examples":["Anulación aceptada"]}},"type":"object","title":"AnulacionResponse200"},"Body_sign_user_in_user_get_token_post":{"properties":{"grant_type":{"anyOf":[{"type":"string","pattern":"password"},{"type":"null"}],"title":"Grant Type"},"username":{"type":"string","title":"Username"},"password":{"type":"string","title":"Password"},"scope":{"type":"string","title":"Scope","default":""},"client_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Id"},"client_secret":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Secret"}},"type":"object","required":["username","password"],"title":"Body_sign_user_in_user_get_token_post"},"ConsultaRequestBody":{"properties":{"cliente_cuenta":{"type":"string","maxLength":18,"minLength":18,"title":"Cliente Cuenta","description":"Cuenta de 18 caracteres.","examples":["987654321987654321"]}},"type":"object","required":["cliente_cuenta"],"title":"ConsultaRequestBody"},"ConsultaResponse200":{"properties":{"cliente_cuenta":{"type":"string","maxLength":18,"minLength":18,"title":"Cliente Cuenta","description":"Cuenta de 18 caracteres.","examples":["987654321987654321"]},"cliente_nombre":{"type":"string","maxLength":200,"minLength":3,"title":"Cliente Nombre","description":"APELLIDO PATERNO/APELLIDO MATERNO,NOMBRES","examples":["SANCHEZ/PEREZ,PEPITO"]},"empresa_nombre":{"type":"string","maxLength":20,"minLength":3,"title":"Empresa Nombre","description":"EMPRESA CLIENTE","examples":["CAJA MAYNAS"]},"empresa_producto":{"type":"string","maxLength":20,"minLength":3,"title":"Empresa Producto","description":"Producto de la empresa","examples":["Pago de Cuota"]},"empresa_cant_cuotas":{"type":"integer","title":"Empresa Cant Cuotas","description":"Cantidad de cuotas que la empresa va a cobrar al cliente, 1 por transacción","examples":[1]},"cuotas":{"items":{"$ref":"#/components/schemas/schemas__consulta_schema__Cuota"},"type":"array","title":"Cuotas"}},"type":"object","title":"ConsultaResponse200"},"Loc":{"properties":{"campoConErrores":{"items":{"type":"string"},"type":"array","title":"Campoconerrores","description":"Listado de errores"}},"type":"object","required":["campoConErrores"],"title":"Loc"},"PagoExtornoAutomRequestBody":{"properties":{"cliente_cuenta":{"type":"string","maxLength":18,"minLength":18,"title":"Cliente Cuenta","description":"Cuenta de 18 caracteres.","examples":["987654321987654321"]},"cuota_numero":{"type":"integer","title":"Cuota Numero","description":"Indica el número del cuota de la cuenta","examples":[2]}},"type":"object","required":["cliente_cuenta"],"title":"PagoExtornoAutomRequestBody"},"PagoRequestBody":{"properties":{"cliente_cuenta":{"type":"string","maxLength":18,"minLength":18,"title":"Cliente Cuenta","description":"Cuenta de 18 caracteres.","examples":["987654321987654321"]},"cuota_numero":{"type":"integer","exclusiveMaximum":240.0,"exclusiveMinimum":0.0,"title":"Cuota Numero","description":"Indica el número del cuota de la cuenta","examples":[2]},"cuota_importe_total":{"type":"number","exclusiveMaximum":1000.0,"exclusiveMinimum":0.0,"title":"Cuota Importe Total","description":"Importe total de la Cuota a Pagar","examples":[123.53]}},"type":"object","required":["cliente_cuenta","cuota_numero","cuota_importe_total"],"title":"PagoRequestBody"},"PagoResponse200":{"properties":{"cliente_cuenta":{"type":"string","maxLength":18,"minLength":18,"title":"Cliente Cuenta","description":"Cuenta de 18 caracteres.","examples":["987654321987654321"]},"pago_id":{"type":"integer","title":"Pago Id","description":"Identificador unico para cada pago.","examples":["132"]},"cuotas":{"items":{"$ref":"#/components/schemas/schemas__pago_schema__Cuota"},"type":"array","title":"Cuotas"}},"type":"object","title":"PagoResponse200"},"Response400":{"properties":{"detail":{"type":"string","title":"Detail","description":"Detalle del error"},"location":{"allOf":[{"$ref":"#/components/schemas/Loc"}],"description":"Ubicación del error"}},"type":"object","required":["detail","location"],"title":"Response400"},"Response422":{"properties":{"detail":{"type":"string","title":"Detail","description":"Detalle del error"}},"type":"object","required":["detail"],"title":"Response422"},"TokenResponse":{"properties":{"access_token":{"type":"string","title":"Access Token"},"token_type":{"type":"string","title":"Token Type"},"token_expiration":{"type":"string","title":"Token Expiration"}},"type":"object","required":["access_token","token_type","token_expiration"],"title":"TokenResponse"},"schemas__consulta_schema__Cuota":{"properties":{"cuota_descripcion":{"type":"string","maxLength":30,"minLength":3,"title":"Cuota Descripcion","description":"Descripción de la deuda","examples":["DEUDA DICIEMBRE 2024"]},"cuota_fecha_vencimiento":{"type":"string","title":"Cuota Fecha Vencimiento","description":"Fecha de vencimiento de la deuda formato: YYYY-MM-DD","examples":["2024-06-05"]},"cuota_numero":{"type":"integer","title":"Cuota Numero","description":"Indica el número del cuota de la cuenta","examples":[2]},"cuota_capital":{"type":"number","title":"Cuota Capital"},"cuota_interes":{"type":"number","title":"Cuota Interes"},"cuota_mora":{"type":"number","title":"Cuota Mora"},"cuota_gastos":{"type":"number","title":"Cuota Gastos"},"cuota_itf":{"type":"number","title":"Cuota Itf"},"cuota_importe_total":{"type":"number","title":"Cuota Importe Total","description":"Importe total de la Cuota. = Capital + interes + mora + gastos + itf"},"cuota_moneda":{"type":"integer","maximum":1.0,"minimum":1.0,"title":"Cuota Moneda","description":"Tipo de moneda de la dueda.  1=Soles, 2=Dolares","examples":[1]},"cuota_anio":{"type":"integer","title":"Cuota Anio","description":"Año de la cuota","examples":[2024]},"cuota_mes":{"type":"integer","title":"Cuota Mes","description":"Indica el mes de la cuota. 1=Enero, 12=Diciembre","examples":[6]}},"type":"object","title":"Cuota"},"schemas__pago_schema__Cuota":{"properties":{"cuota_numero":{"type":"integer","title":"Cuota Numero","description":"Indica el número del cuota de la cuenta","examples":[2]},"cuota_importe_total":{"type":"number","title":"Cuota Importe Total","description":"Importe total de la Cuota. = Deuda + mora + gastos"}},"type":"object","title":"Cuota"}},"securitySchemes":{"OAuth2PasswordBearer":{"type":"oauth2","flows":{"password":{"scopes":{},"tokenUrl":"/user/get_token"}}}}}}